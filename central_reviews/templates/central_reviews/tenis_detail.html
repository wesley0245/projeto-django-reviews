{% extends 'base.html' %}

{% block content %}
  <h2>{{ tenis.marca }} {{ tenis.nome }}</h2>
  <p>Categoria: {{ tenis.categoria.nome }}</p>

  {% if tenis.imagem_principal %}
    <img src="{{ tenis.imagem_principal.url }}" alt="{{ tenis.nome }}" width="400" class="tenis-detail">
  {% endif %}

  <hr>

  {% if user.is_authenticated %}
    <a href="{% url 'review-create' tenis.pk %}">
        Escrever um novo review
    </a>
  {% else %}
    <p><a href="{% url 'login' %}?next={{ request.path }}">Faça o login</a> para escrever um review.</p>
  {% endif %}

  <h3>Reviews deste modelo</h3>
  
  {% if reviews_list %}
    <ul class="review-list">
      {% for review in reviews_list %}
        <li class="review-item">
          <h4>{{ review.titulo_review }} (Nota: {{ review.nota }}/5)</h4>
          <p><strong>Por: {{ review.autor.username }}</strong> em {{ review.data_publicacao|date:"d/m/Y" }}</p>
          <p>{{ review.texto_review }}</p>

          {% if user == review.autor %}
            <a href="{% url 'review-update' review.pk %}">Editar</a>
            <a href="{% url 'review-delete' review.pk %}">Deletar</a>
          {% endif %}
          
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Este tênis ainda não tem nenhum review. Seja o primeiro!</p>
  {% endif %}

{% endblock %}